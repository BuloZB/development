<!DOCTYPE HTML>
<html>
<head>
    <title>Emonhub log</title>
    
    <script type="text/javascript" src="static/jquery-1.9.0.min.js"></script>
    <script type="text/javascript" src="static/socket.io.min.js"></script>
    
    <script type="text/javascript" charset="utf-8">
        $(document).ready(function(){
            namespace = '/test'; // change to an empty string to use the global namespace

            // the socket.io documentation recommends sending an explicit package upon connection
            // this is specially important when using the global namespace
            var socket = io.connect('http://' + document.domain + ':' + location.port + namespace);
            socket.on('connect', function() {
                socket.emit('my event', {data: 'I\'m connected!'});
            });

            // event handler for server sent data
            // the data is displayed in the "Received" section of the page
            socket.on('my response', function(msg) {
                $('#log').append(msg.topic+" "+msg.payload+"\n");
                var h = parseInt($('#log')[0].scrollHeight);
                $('#log').scrollTop(h);
                
            });
            
            // socket.emit('my event', {data: $('#emit_data').val()});
        });
    </script>
    
    <style>
        pre {
            font-size:16px;
            color:#fff;
            background-color:#300a24;
            padding:20px;
            height:500px;
            overflow: scroll;
            overflow-x: hidden;
        }
    </style>
    
</head>
<body>
    <pre id="log"></pre>
</body>
</html>
